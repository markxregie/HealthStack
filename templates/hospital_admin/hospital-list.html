{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <title>HealthStack</title>

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'HealthStack-System/images/Normal/favicon.png' %}"/>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'HealthStack-System/css/admin/bootstrap.min.css'%}"> 

    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="{% static 'HealthStack-System/css/admin/font-awesome.min.css'%}">

    <!-- Feathericon CSS -->
    <link rel="stylesheet" href="{% static 'HealthStack-System/admin_assets/css/feathericon.min.css'%}">

    <!-- Datatables CSS -->
    <link rel="stylesheet" href="{% static 'HealthStack-System/plugins/admin/datatables/datatables.min.css'%}"> 

    <!-- Main CSS -->
    <link rel="stylesheet" href="{% static 'HealthStack-System/css/admin/style.css'%}"> 

    <!-- Custom Theme Colors -->
    <style>
        :root {
            --primary-color: #95C270;     /* Green */
            --hover-bg-color: #e6f0c8;    /* Light green hover */
            --danger-color: #dc3545;      /* Red for delete buttons */
        }

        /* Table header */
        table.datatable thead tr th {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
        }

        /* Zebra striping for readability */
        table.datatable tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        /* Row hover */
        table.datatable tbody tr:hover {
            background-color: var(--hover-bg-color);
        }

        /* Primary buttons */
        .btn.btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: #fff;
        }

        .btn.btn-primary:hover {
            background-color: var(--hover-bg-color);
            border-color: var(--hover-bg-color);
            color: #000; /* readable text on light hover */
        }

        /* Keep delete buttons red */
        .btn.bg-danger-light,
        .btn.btn-danger {
            background-color: var(--danger-color) !important;
            border-color: var(--danger-color) !important;
            color: #fff !important;
        }
        .btn.bg-danger-light:hover,
        .btn.btn-danger:hover {
            opacity: 0.85;
        }
    </style>
</head>

<body>
    <!-- Main Wrapper -->
    <div class="main-wrapper">
        <header class="header">{% include 'hospital_admin/hospital-admin-navbar.html' %}</header>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            {% include 'hospital_admin/hospital-admin-sidebar.html' %}
        </aside>
        <!-- /Sidebar -->

        <!-- Page Wrapper -->
        <div class="page-wrapper">
            <div class="content container-fluid">
                <div class="">
                    <a href="{% url 'add-hospital' %}" class="fe fe-plus btn btn-primary float-right mt-2">Add hospital</a>
                </div>

                <!-- Page Header -->
                <div class="page-header">
                    <div class="row">
                        <div class="col-sm-12">
                            <h3 class="page-title">List of Hospital</h3>
                            <ul class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
                                <li class="breadcrumb-item"><a href="javascript:(0);">Users</a></li>
                                <li class="breadcrumb-item active">Hospital</li>
                            </ul>
                            {% include 'message.html' %}
                        </div>
                    </div>
                </div>
                <!-- /Page Header -->

                <div class="row">
                    <div class="col-sm-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="datatable table table-hover table-center mb-0">
                                        <thead>
                                            <tr style="text-align: center;">
                                                <th style="text-align: left;">Hospital Name</th>
                                                <th>Address</th>
                                                <th>Email</th>
                                                <th>Phone Number</th>
                                                <th>Hospital Type</th>
                                                <th>Edit Hospital</th>
                                                <th>Department List</th>
                                                <th>Delete Hospital</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for hospital in hospitals %}
                                            <tr style="text-align: center;">
                                                <td style="text-align: left;">
                                                    <h2 class="table-avatar">
                                                        <a href="#" class="avatar avatar-sm mr-2">
                                                            <img class="avatar-img rounded-circle" src="{{hospital.featured_image.url}}" alt="User Image">
                                                        </a>															
                                                        <a href="#">{{hospital.name}}</a>
                                                    </h2>
                                                </td>
                                                <td>{{hospital.address}}</td>
                                                <td>{{hospital.email}}</td>
                                                <td>{{hospital.phone_number}}</td>
                                                <td>{{hospital.hospital_type}}</td>
                                                <td>
                                                    <a href="{% url 'edit-hospital' pk=hospital.hospital_id %}" class="btn btn-primary">Edit</a>
                                                </td>
                                                <td>
                                                    <a href="{% url 'department-image-list' pk=hospital.hospital_id%}" class="btn btn-primary">Edit</a>
                                                </td>
                                                <td class="text-center">
                                                    <div class="actions">
                                                        <a data-toggle="modal" data-target="#delete_modal{{hospital.hospital_id}}" class="btn btn-sm bg-danger-light">
                                                            <i class="fe fe-trash"></i> Delete
                                                        </a>
                                                    </div>
                                                </td>
                                            </tr>

                                            <!-- Delete Modal -->
                                            <div class="modal fade" id="delete_modal{{hospital.hospital_id}}" aria-hidden="true" role="dialog">
                                                <form method="POST" action="{% url 'delete-hospital' pk=hospital.hospital_id %}">
                                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                                        <div class="modal-content">
                                                            {% csrf_token %}
                                                            <div class="modal-body">
                                                                <div class="form-content p-2">
                                                                    <h4 class="modal-title text-center">Delete</h4>
                                                                    <p class="mb-4 text-center">Are you sure want to delete?</p>
                                                                    <div class="d-flex justify-content-center">
                                                                        <button type="submit" class="btn btn-primary mr-2">Save</button>
                                                                        <button type="button" class="btn btn-danger ml-2" data-dismiss="modal">Close</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>			
                </div>
            </div>			
        </div>
    </div>

    <!-- jQuery -->
    <script src="{% static 'HealthStack-System/js/admin/jquery-3.2.1.min.js' %}"></script> 

    <!-- Bootstrap Core JS -->
    <script src="{% static 'HealthStack-System/js/admin/popper.min.js' %}"></script> 
    <script src="{% static 'HealthStack-System/js/admin/bootstrap.min.js' %}"></script> 

    <!-- Slimscroll JS -->
    <script src="{% static 'HealthStack-System/plugins/admin/slimscroll/jquery.slimscroll.min.js' %}"></script>

    <!-- Datatables JS -->
    <script src="{% static 'HealthStack-System/plugins/admin/datatables/jquery.dataTables.min.js'%}"></script> 
    <script src="{% static 'HealthStack-System/plugins/admin/datatables/datatables.min.js'%}"></script>

    <!-- Custom JS -->
    <script src="{% static 'HealthStack-System/js/admin/script.js' %}"></script>

    {% if messages %}
    <script>
        {% for message in messages %}
            $(document).ready(function () {
                $('.toast').toast('show');
            });
        {% endfor %}
    </script>
    {% endif %}
</body>
</html>
